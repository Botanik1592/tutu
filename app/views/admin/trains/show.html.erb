<div>
  <h2>Поезд № <%= @train.number %></h2>
</div>

<div>
  <h3>Текущая станция:</h3>
  <% if @train.current_station.present? %>
    <%= @train.current_station.title %>
  <% else %>
    <p>Станция не назначена</p>
  <% end %>
</div>

<div>
  <h3>Поезд на маршруте:</h3>
  <% if @train.route.present? %>
    <%= @train.route.name %>
  <% else %>
    <p>Маршрут не назначен</p>
  <% end %>
</div>

<div>
  <h3>Вагоны:</h3>
  <% if @train.wagons.present? %>
    <table class="table table-striped">
    <thead>
      <th>№</th>
      <th>Тип вагона</th>
    </thead>
      <% @train.wagons_order.each do |wagon| %>
        <tr>
          <td><%= link_to wagon.number, admin_wagon_path(wagon) %></td>
          <td><%= link_to wagon.type.to_s, admin_wagon_path(wagon) %></td>
          <td><%= link_to "Удалить", admin_wagon_path(wagon), method: :delete, data: { confirm: "Are you sure?" } %></td>
        </tr>
      <% end %>
    </table>
  <% else %>
    <p>Вагоны не добавлены</p>
  <% end %>

  <%= link_to 'Добавить вагон', new_admin_train_wagon_path(@train) %>
</div>

<div>
  <h3>Места:</h3>
  <table class="table table-striped">
    <tr>
      <th>Тип вагонов</th>
      <th>Кол-во верхних мест</th>
      <th>Кол-во нижних мест</th>
      <th>Кол-во боковых верхних мест</th>
      <th>Кол-во боковых нижних мест</th>
      <th>Кол-во сидячих мест</th>
    </tr>
     <% if @train.wagons.present? %>
      <% WagonType.all.each do |wagon| %>
        <tr>
          <td><b><%= wagon.title %>:</b>(<%= @train.wagons.where(type: wagon.wagon_type).size %> шт.)</td>
          <% Wagon::PLACES.each do |place_type, place_name| %>
          <td align="center">
            <%= @train.show_places(wagon.wagon_type, place_type) %>
          </td>
          <% end %>
        </tr>
      <% end %>
     <% end %>
  </table>
</div>
<hr>

<%= link_to 'Редактировать', edit_admin_train_path(@train) %> |
<%= link_to 'Назад', admin_trains_path %>
